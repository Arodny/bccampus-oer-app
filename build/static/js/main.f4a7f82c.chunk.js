(this["webpackJsonpbccampus-oer-app"]=this["webpackJsonpbccampus-oer-app"]||[]).push([[0],{26:function(e,t,n){},3:function(e,t,n){e.exports={OerItem:"Oer_OerItem__fERLX",OerItemTop:"Oer_OerItemTop__3SA4U",Chevron:"Oer_Chevron__2H0jJ",Info:"Oer_Info__1WfSz",InfoOpen:"Oer_InfoOpen__38XkH",example:"Oer_example__M_KQf",Content:"Oer_Content__3MP7D",Bottom:"Oer_Bottom__tkAsS"}},44:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(2),o=n.n(a),c=n(19),s=n.n(c),i=(n(26),n(5)),l=n(6),u=n(8),h=n(7),j=n(9),d=n(20),p=n(4),O=n.n(p),m=n(3),f=n.n(m),b=function(e){return Object(r.jsxs)("div",{className:f.a.OerItem,children:[Object(r.jsxs)("div",{className:f.a.OerItemTop,onClick:e.onClick,children:[Object(r.jsx)("h3",{children:e.oer.title.rendered}),Object(r.jsx)("div",{className:f.a.Chevron,style:e.isOpen?null:{transform:"rotate(90deg)"},children:Object(r.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsx)("path",{d:"M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM273 369.9l135.5-135.5c9.4-9.4 9.4-24.6 0-33.9l-17-17c-9.4-9.4-24.6-9.4-33.9 0L256 285.1 154.4 183.5c-9.4-9.4-24.6-9.4-33.9 0l-17 17c-9.4 9.4-9.4 24.6 0 33.9L239 369.9c9.4 9.4 24.6 9.4 34 0z"})})})]}),Object(r.jsxs)("div",{className:e.isOpen?"".concat(f.a.Info," ").concat(f.a.InfoOpen):f.a.Info,children:[Object(r.jsx)("div",{className:f.a.Content,children:Object.keys(e.oer.meta).map((function(t){return Object(r.jsxs)("p",{children:[Object(r.jsxs)("b",{children:[t,":"]})," ",e.oer.meta[t].value]},t)}))}),Object(r.jsx)("div",{style:{textAlign:"right"},children:Object(r.jsx)("a",{href:e.oer.link,title:"Open this resource in a new tab",target:"_BLANK",rel:"noreferrer",className:"Button",children:"Open Resource"})})]})]})},v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).RESOURCE_ENDPOINTS=["https://collection.bccampus.ca/wp-json/wp/v2/oer"],e.RESULTS_PER_PAGE=12,e.axiosCancelTokens=[],e.state={oers:[],open:null,loading:!0,page:1,total:0},e.getResources=function(){var t=function(e,t){var n;return null===(n=e._links["wp:term"].find((function(e){return e.taxonomy===t})))||void 0===n?void 0:n.href};e.setState({loading:!0,open:null,oers:[],total:0}),e.axiosCancelTokens.forEach((function(e){return e.cancel()}));for(var n=e.RESOURCE_ENDPOINTS.length,r=Math.floor(e.RESULTS_PER_PAGE/n),a=0;a<n;a++){a===n-1&&(r=Math.floor(e.RESULTS_PER_PAGE/n)+e.RESULTS_PER_PAGE%n);var o=O.a.CancelToken.source();e.axiosCancelTokens.push(o),O.a.get("".concat(e.RESOURCE_ENDPOINTS[a],"?page=").concat(e.state.page,"&per_page=").concat(r),{cancelToken:o.token}).then((function(n){var r=n.data.map((function(e){return{id:e.id,title:e.title,link:e.link,meta:{Institutions:{url:t(e,"institutions"),value:null},Authors:{url:t(e,"authors"),value:null}}}}));e.setState((function(e){return{oers:e.oers.concat(r),total:e.total+Number(n.headers["x-wp-total"]),loading:!1}}))})).catch((function(t){console.log(t),O.a.isCancel(t)||e.setState({error:"One or more resources failed to load",loading:!1})}))}},e.nextPage=function(){e.setState((function(e){return{page:e.page+1}}),e.getResources)},e.previousPage=function(){e.state.page>1&&e.setState((function(e){return{page:e.page-1}}),e.getResources)},e.openResourceHandler=function(t){e.setState((function(e){return{open:e.open===t?null:t}}));var n=e.state.oers[t],r=function(r){if(n.meta.hasOwnProperty(r)&&n.meta[r].url&&!n.meta[r].value){var a=O.a.CancelToken.source();e.axiosCancelTokens.push(a),O.a.get(n.meta[r].url,{cancelToken:a.token}).then((function(n){var a=n.data.map((function(e){return e.name})).join(", ");e.setState((function(e){var n=Object(d.a)(e.oers),o=Object(j.a)({},n[t]);return o.meta=Object(j.a)({},o.meta),o.meta[r]=Object(j.a)({},o.meta[r]),o.meta[r].value=a,n[t]=o,{oers:n}}))})).catch((function(e){console.log(e)}))}};for(var a in n.meta)r(a)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getResources()}},{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{children:[this.state.loading?Object(r.jsx)("div",{className:"loader"}):null,this.state.error?Object(r.jsx)("p",{className:"error",children:this.state.error}):null,Object(r.jsx)("div",{children:this.state.oers.map((function(t,n){return Object(r.jsx)(b,{oer:t,isOpen:n===e.state.open,onClick:function(){return e.openResourceHandler(n)}},t.id)}))}),Object(r.jsxs)("div",{className:"OerControls",children:[Object(r.jsxs)("p",{children:["Showing ",this.state.oers.length," out of ",this.state.total," results"]}),Object(r.jsxs)("p",{children:["Page ",this.state.page]}),Object(r.jsxs)("div",{children:[this.state.page>1?Object(r.jsx)("button",{className:"Button",onClick:this.previousPage,title:"View the previous page of results",children:"Previous Page"}):null,Object(r.jsx)("button",{className:"Button",onClick:this.nextPage,style:{marginLeft:"1em"},title:"View the next page of results",children:"Next Page"})]})]})]})}}]),n}(o.a.Component),g=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(l.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(r.jsx)("h2",{className:"error",children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(o.a.Component),x=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e;null===(e=document.getElementById("loadingScreen"))||void 0===e||e.remove()}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)("header",{className:"Header",children:[Object(r.jsx)("h1",{children:"OER Collection"}),Object(r.jsx)("h2",{children:"from BCcampus"}),Object(r.jsx)("div",{className:"Graphic"})]}),Object(r.jsxs)("div",{className:"MainContent",children:[Object(r.jsx)("h1",{children:"Resource List"}),Object(r.jsx)("div",{className:"OerSection",children:Object(r.jsx)(g,{children:Object(r.jsx)(v,{})})})]}),Object(r.jsx)("footer",{className:"Footer",children:Object(r.jsx)("p",{children:"This application was developed for BCcampus by Joe Hall. All content on this page is subject to BCcampus' terms of use."})})]})}}]),n}(o.a.Component),_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root")),_()}},[[44,1,2]]]);
//# sourceMappingURL=main.f4a7f82c.chunk.js.map